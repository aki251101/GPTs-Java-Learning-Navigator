# 機能仕様書（SPECIFICATION）

Javaアプリ開発学習ナビゲーターの機能仕様を記載します。  
目的は「初学者でも迷わず Day 学習を進め、成果物が Drive に残る」状態を再現可能にすることです。

---

## 目次
- [1. 初回ヒアリング](#1-初回ヒアリング)
- [2. プロジェクト作成](#2-プロジェクト作成)
- [3. Day提示](#3-day提示)
- [4. 進捗管理](#4-進捗管理)
- [5. 学習報告書作成](#5-学習報告書作成)
- [6. コマンド一覧](#6-コマンド一覧)
- [7. データ構造](#7-データ構造)
- [8. API仕様（GAS Gateway）](#8-api仕様gas-gateway)

---

## 1. 初回ヒアリング

### 概要
新規プロジェクト開始時に、学習スタイルに合わせてカスタマイズするための質問を行います。

### 質問項目（全9項目）
> 以降の仕様は「デフォルト値」を持ち、ユーザーが未入力でも進行できるようにします。

#### 質問1: 社外共有
```
1. このプロジェクトは社外に共有しますか？

A) はい（公開用）
B) いいえ（個人・社内用）

※デフォルト: A（公開用）
```
**意図**
- 公開用：固有名詞・機密情報を避ける
- 個人用：具体情報を含めてOK

#### 質問2: 題材
```
2. 作りたいアプリの題材を選んでください。

A) タスク管理
B) 書籍管理
C) 家計簿
D) メモ
E) 自由入力

※デフォルト: A（タスク管理）
```

#### 質問3: 期限
```
3. 完成までの期限を教えてください。

A) 完成希望日を指定（例: 2026-04-30）
B) 稼働学習日数を指定
   - 30日 / 60日 / 100日 / 自由入力

※デフォルト: 60日
```

#### 質問4: 学習カレンダー
- 4-1 休み曜日（例：土日）
- 4-2 祝日を休みにするか
- 4-3 追加の休み日（例：2026-01-10,毎週水曜日）
- 4-4 Dayの数え方（稼働日だけ / カレンダー日）

#### 質問5: 学習コース
- A) 基礎（Javaコンソール）
- B) 応用（Spring Boot入門）

#### 質問6: 学習ペース
- ゆっくり / 標準 / 速い（Dayの密度を変える）

#### 質問7: 追加オプション
- なし（デフォルト）
- 必要に応じて拡張（例：復習日、演習強化、レビュー回数）

#### 質問8: 開発環境
- 未準備（Day001で環境構築から）
- 準備済み（Day001は次の学習へ）

---

## 2. プロジェクト作成

### 概要
初回ヒアリング完了後、Google Drive に学習プロジェクトを自動作成します。

### 作成されるもの（Drive上）
- ルートフォルダ：`アプリ開発学習ナビゲーター`
- プロジェクトフォルダ：`{題材}_{YYYYMMDD}`
- 設計書（Google Doc）：`設計書_{題材}`
- スケジュール（Google Sheet）：`スケジュール_{題材}`（Plan/Meta）
- レポートフォルダ：`レポート`

### 重要設計
- **Sheet（Meta/Plan）を正本（Single Source of Truth）** として扱う
- 以後の処理は、常に Sheet を読み、必要なら Doc/Sheet を更新する

---

## 3. Day提示

### 概要
`今日` で、次の未完了 Day を提示します。

### Dayテンプレ（要点）
- 今日やること（目的）
- 今日のゴール（Done条件）
- 実装ステップ（最大7）
- 初心者の落とし穴（3）
- 次回の準備（あれば）

---

## 4. 進捗管理

### ステータス
- `NOT_STARTED`：未着手
- `IN_PROGRESS`：対応中
- `DONE`：完了
- `PAUSED`：中断（任意）

### 更新タイミング（例）
- `今日` 実行時：対象 Day を `IN_PROGRESS` に更新
- `完了` 実行時：対象 Day を `DONE` に更新
- `中断` 実行時：対象 Day を `PAUSED` に更新（採用する場合）

---

## 5. 学習報告書作成

### 概要
Day 完了後、必要に応じて日次報告書を Google Doc で作成します。

### 内容（例）
- 今日やったこと（箇条書き）
- つまずき（原因/対応）
- 学び（1〜3行）
- 次回やること

---

## 6. コマンド一覧
- `開始`：初回ヒアリング
- `今日`：次の Day を提示（進捗更新を含む）
- `DayNNN`：特定 Day を指定
- `完了`：Day 完了（必要に応じて報告書へ誘導）
- `中断`：中断（任意）
- `一覧`：プロジェクト一覧（任意）

---

## 7. データ構造

### スケジュール（Google Sheet）
- Plan：Dayごとの計画と状態
- Meta：プロジェクト設定（Key-Value）

### Meta 例（抜粋）
- `PROJECT_NAME`
- `TOP_FOLDER_ID`
- `PROJECT_FOLDER_ID`
- `SPEC_DOC_ID`
- `SCHEDULE_SHEET_ID`
- `TIMEZONE`
- `HOLIDAYS_MODE`
- `REST_RULES`

---

## 8. API仕様（GAS Gateway）

### エンドポイント（共通）
```
POST https://script.google.com/macros/s/{SCRIPT_ID}/exec
```

### 認証
- API Key を **リクエストボディに含める**
- （GAS doPost の制約で Authorization ヘッダを参照できない想定）

### 共通リクエスト形式（例）
```json
{
  "key": "{API_KEY}",
  "action": "{アクション名}",
  "...": "params"
}
```

### 代表アクション（例）
- `drive/list`：ファイル/フォルダ検索
- `drive/createFolder`：フォルダ作成
- `docs/create`：Doc作成
- `sheets/create`：Sheet作成
- `sheets/read`：Sheet読込
- `sheets/update`：Sheet更新
- `docs/append`：Doc追記（または置換）

> ※実装の action 名は OpenAPI と GAS 実装を正本として一致させます。
