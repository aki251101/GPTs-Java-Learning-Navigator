# 設計書（ARCHITECTURE）

Javaアプリ開発学習ナビゲーターのシステム構成・データフロー・技術選定の理由・制約と対応を記載します。  
ポイントは **「状態の正本を Sheets に寄せ、チャットが変わっても再開できる」** ことです。

---

## 目次
- [1. システム構成](#1-システム構成)
- [2. データフロー](#2-データフロー)
- [3. 技術選定の理由](#3-技術選定の理由)
- [4. 工夫した点](#4-工夫した点)
- [5. 制約事項と対応](#5-制約事項と対応)
- [6. 今後の拡張性](#6-今後の拡張性)
- [付録（見積もり）](#付録見積もり)

---

## 1. システム構成

### 全体構成図
```
┌──────────────────────────────────────────┐
│                 ユーザー                  │
│           (ChatGPT Web/Mobile)            │
└─────────────────────┬────────────────────┘
                      │ チャット
┌─────────────────────▼────────────────────┐
│            GPTs（Custom GPTs）            │
│  - ヒアリング/Day提示/進捗更新/誘導        │
└─────────────────────┬────────────────────┘
                      │ API呼び出し（POST）
┌─────────────────────▼────────────────────┐
│        GAS WebApp（Drive/Docs/Sheets）     │
│  - Drive作成/検索                          │
│  - Sheets読込/更新                         │
│  - Docs作成/追記                           │
└─────────────────────┬────────────────────┘
                      │ 保存先（ユーザーのDrive）
┌─────────────────────▼────────────────────┐
│ Google Drive（成果物保管）                 │
│  - スケジュール（Sheet：Plan/Meta）【正本】 │
│  - 設計書（Doc）                            │
│  - 日次報告書（Doc）                        │
└──────────────────────────────────────────┘
```

---

## 2. データフロー

### 2-1. 新規プロジェクト作成
```
ユーザー: 開始
  ↓
GPTs: ヒアリング（題材/期限/休日/ペース/環境...）
  ↓
GAS: ルートフォルダ作成 → プロジェクトフォルダ作成
  ↓
GAS: 設計書Doc作成 / スケジュールSheet作成 / レポートフォルダ作成
  ↓
GPTs: 作成結果（URL/次のアクション）提示
```

### 2-2. 1Day 学習の基本
```
ユーザー: 今日
  ↓
GAS: Meta読込 → Plan読込（次の未完了Dayを特定）
  ↓
GPTs: Day提示（ゴール/手順/落とし穴/Done）
  ↓
ユーザー: 完了
  ↓
GAS: Plan更新（DONE）→ 必要に応じて報告書Doc作成/追記
```

---

## 3. 技術選定の理由

### 3-1. GPTs（ChatGPT Custom GPTs）
**狙い**：初学者が「自然言語」で進められる UI を提供する。  
**メリット**
- コマンド暗記が不要（会話で誘導できる）
- 説明・例示がしやすい（初学者向け）
- マルチデバイスで動く（Web/スマホ）

**注意**
- GPTs は仕様/制限（文字数、メモリのチャット単位など）に影響される

### 3-2. GAS（Google Apps Script）
**狙い**：Drive/Docs/Sheets をサーバレスで操作する。  
**メリット**
- インフラ不要、無料枠で十分
- Google 製品との親和性が高い
- WebApp 化で GPTs から呼び出しやすい

### 3-3. Drive/Docs/Sheets
**狙い**：成果物をユーザーの Drive に保存し、学習の証拠として残す。  
**メリット**
- データの所有権がユーザー側
- 共有や提出が容易
- テキスト中心で容量が小さい

---

## 4. 工夫した点

### 4-1. Sheet = Single Source of Truth（正本）
- ChatGPT の会話状態はチャット単位で途切れる
- 進捗・日付・成果物URLを Sheet（Meta/Plan）に集約することで、**別チャットでも再開可能**

### 4-2. 「初心者の落とし穴」をテンプレ化
- 迷いやすいポイント（JDK/JRE、パス、実行方法、例外など）を Day 提示に固定で入れる
- 学習が止まりやすい箇所を先回りする

### 4-3. 生成物を「証拠」として残す
- 設計書（Doc）
- スケジュール（Sheet）
- 日次報告書（Doc）
→ 学習の過程をそのまま提出・ポートフォリオ化しやすい

---

## 5. 制約事項と対応

### 5-1. GPTs の制約
- **メモリがチャット単位**  
  → **Sheet を正本**にして、状態を外部化
- **指示文字数制限**  
  → Instructions と Knowledge に分割して運用
- **利用プラン（Plus 等）**  
  → 公開時は前提条件として明示

### 5-2. GAS の制約
- **実行時間制限**  
  → 長い処理は分割（作成→更新を段階化）
- **同時実行数**  
  → 個人利用では問題になりにくい
- **レート制限**  
  → リトライ/バックオフの方針を用意

### 5-3. Drive/Sheets/Docs の制約
- RDB のような強い整合性はない  
  → 更新は「1回ずつ確定」させ、単純な CRUD に限定

---

## 6. 今後の拡張性
- Phase 2：応用コース（Spring Boot）  
  - Dayテンプレ/設計書テンプレ/評価観点を追加
- Phase 3：学習分析（つまずき傾向の可視化）
- Phase 4：他言語対応（Python/JavaScript）

---

## 付録（見積もり）

### A. データ量
- 設計書：数 KB
- スケジュール：数 KB〜十数 KB
- 報告書：数 KB × Day 数
→ 個人利用では 15GB の範囲で十分

### B. API 呼び出し回数
- プロジェクト作成：複数回（フォルダ/Doc/Sheet 生成）
- 1 Day：Meta読込/Plan読込/更新/報告書作成 など
→ 無料枠内で運用可能な設計を前提とする
